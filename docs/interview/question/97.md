# :question: å¼¹æ€§ç›’å­ä¸­ flex: 0 1 auto è¡¨ç¤ºä»€ä¹ˆæ„æ€ï¼Ÿ

```css
.item {
  flex: 0 1 auto;
}
```

`flex` å±æ€§æ˜¯ `flex-grow`ã€`flex-shrink`ã€`flex-basis` çš„ç®€å†™ é»˜è®¤å€¼ä¸º `0 1 auto` åä¸¤ä¸ªå±æ€§å¯é€‰

```css
.item {
  /* ä¸€å®šé¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ é»˜è®¤å€¼ 0 å³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ */
  /* å¦‚æœæ‰€æœ‰é¡¹ç›®çš„çš„ flex-grow éƒ½ä¸º 1 åˆ™ä»–ä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ */
  /* å¦‚æœæœ‰ä¸€ä¸ªé¡¹ç›®çš„ flex-grow ä¸º 2 å…¶ä»–é¡¹ç›®éƒ½ä¸º 1 é‚£ä¹ˆå‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ */
  flex-grow: 0;

  /* å®šä¹‰é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ é»˜è®¤å€¼ä¸º 1 å³ç©ºé—´ä¸è¶³ è¯¥é¡¹ç›®å°†ç¼©å° */
  /* å¦‚æœæ‰€æœ‰é¡¹ç›®çš„ flex-shrink å±æ€§éƒ½ä¸º 1 å½“ç©ºé—´ä¸è¶³æ—¶ éƒ½å°†ç­‰æ¯”ä¾‹ç¼©å° */
  /* å¦‚æœä¸€ä¸ªé¡¹ç›®çš„ flex-shrink å±æ€§ä¸º 0 å…¶ä»–é¡¹ç›®éƒ½ä¸º 1 åˆ™ç©ºé—´ä¸è¶³æ—¶ å‰è€…ä¸ç¼©å° */
  /* è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆ */
  flex-shrink: 1;

  /* å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ é¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰*/
  /* æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ è®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ å®ƒé»˜è®¤ä¸º auto å³é¡¹ç›®çš„æœ¬æ¥å¤§å° */
  flex-basis: auto;
}
```

## æ‰©å±•

é‚£ä¹ˆ `flex-grow`ã€`flex-shrink` å®½åº¦æ˜¯æ€ä¹ˆå»è®¡ç®—çš„å‘¢

è¯·çœ‹é¢˜ :question:

```css
* {
  padding: 0;
  margin: 0;
}
.container {
  width: 600px;
  height: 300px;
  display: flex;
}
.left {
  flex: 1 2 500px;
  background: red;
}
.right {
  flex: 2 1 400px;
  background: blue;
}
```

é‚£ä¹ˆ `left` `right` åˆ†åˆ«å æ®çš„å®½åº¦æ˜¯å¤šå°‘

### `flex-grow`

å¦‚ä½•åˆ†é…å‰©ä½™ç©ºé—´ï¼Œå…¶å€¼ä¸ºä¸€ä¸ªæƒé‡ï¼ˆä¹Ÿç§°æ‰©å¼ å› å­ï¼‰ï¼Œé»˜è®¤ä¸º 0ï¼Œå‰©ä½™ç©ºé—´å°†ä¼šæŒ‰ç…§è¿™ä¸ªæƒé‡æ¥åˆ†é…ã€‚

ä¸¾ä¸ª ğŸŒ°

```less
.container {
  width: x;
  display: flex;

  .item1 {
    // æ‰€å æ®çš„ç©ºé—´å°±æ˜¯
    // x * a / (a + b + c)
    flex-grow: a;
  }

  .item2 {
    // æ‰€å æ®çš„ç©ºé—´å°±æ˜¯
    // x * b / (a + b + c)
    flex-grow: b;
  }

  .item3 {
    // æ‰€å æ®çš„ç©ºé—´å°±æ˜¯
    // x * c / (a + b + c)
    flex-grow: c;
  }
}
// å¦‚æœ
// x = 1000
// a = 1
// b = 2
// c = 3
// then =>
// item1 => width: 1000 * 1 / (1 + 2 + 3) => 166.66
// item1 => width: 1000 * 2 / (1 + 2 + 3) => 333.33
// item1 => width: 1000 * 3 / (1 + 2 + 3) => 500
```

å†ä¸¾ä¸ª ğŸŒ°

```less
.container {
  width: 1000px;
  display: flex;

  .item1 {
    width: 200px;
    flex-grow: a;
  }

  .item2 {
    width: 100px;
    flex-grow: b;
  }
}
// é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ flex-grow æ€ä¹ˆç®—
// å‰©ä½™ç©ºé—´ï¼šx => (1000 - 200 - 300) => 700
// item1 => width: 200(åŸæœ‰å®šä¹‰çš„) + 700 * a / (a + b)
// item2 => width: 100(åŸæœ‰å®šä¹‰çš„) + 700 * b / (a + b)
```

**æ³¨æ„**ï¼šå¦‚æœ `(a + b + c + ...) < 1`

```js
// ä»–ä»¬ä¼šèµ°è¿™æ ·ä¸€ä¸ªé€»è¾‘
let num = a + b + c + ...
if (num < 1) num = 1
```

é‚£ä¹ˆå°±ä¼šå˜æˆ

```less
// x = 1000
// a = 0.1
// b = 0.2
// å‰©ä½™ç©ºé—´ï¼šx => (1000 - 100 - 200) => 700
// item1 => width: 200(åŸæœ‰å®šä¹‰çš„) + 700 * 0.1 / 1
// item2 => width: 100(åŸæœ‰å®šä¹‰çš„) + 700 * 0.2 / 1
//å‰©ä¸‹çš„ç©ºé—´å°†ä¸ä¼šåˆ†é…ç»™ä»»ä½•çš„å…ƒç´ 
```

## `flex-shrink`

å¦‚æœä½ è§‰å¾— `flex-shrink` çš„è®¡ç®—æ–¹å¼è·Ÿ `flex-grow` çš„ç±»ä¼¼ï¼Œå…¶å®æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª ğŸŒ° æ¥è¯´æ˜

```less
.container {
  display: flex;
  width: 500px;

  .item1 {
    flex-shrink: 1;
    width: 100px;
  }

  .item2 {
    flex-shrink: 1;
    width: 200px;
  }

  .item3 {
    flex-shrink: 1;
    width: 300px;
  }
}

// é¦–å…ˆæˆ‘ä»¬è¦è®¡ç®— æº¢å‡ºå®½åº¦
// æº¢å‡ºå®½åº¦ x => 100(item1) + 200(item2) + 300(item3) - 500(container) => 100
// è®¡ç®—å‡ºæ”¶ç¼©æ€»çš„æƒé‡å®½åº¦ï¼šæ¯ä¸ªå…ƒç´ æ”¶ç¼©çš„æƒé‡ä¸ºå…¶ flex-shrink ä¹˜ä»¥å…¶å®½åº¦
// æ€»æƒé‡ y => (item1 shrink)1 * (item1 width)100 + (item2 shrink)2 * (item2 width)200 + (item3 shrink)3 * (item3 width)300 => 1400
// é‚£ä¹ˆ ä¸‰ä¸ªå…ƒç´ æ”¶ç¼©å®½åº¦
// item1 => (shrink)1 * (x)100 * (width)100 / (y)1400  => 7.14
// item2 => (shrink)2 * (x)100 * (width)200 / (y)1400  => 28.57
// item3 => (shrink)3 * (x)100 * (width)300 / (y)1400  => 64.28
// é‚£ä¹ˆæœ€ç»ˆå®½åº¦
// item1 => 100 - 7.14 => 92.86
// item2 => 200 - 28.57 => 171.43
// item1 => 300 - 64.28 => 235.72
```

`flex-shrink` ä¸ºè´Ÿæ•°çš„è¯ï¼Œè¯¥æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿ

```less
// å¦‚ä¸Šé¢˜
// item1 shrink => 0.1
// item2 shrink => 0.2
// item3 shrink => 0.3
// x => æº¢å‡ºå®½åº¦ï¼ˆ100 + 200 + 300 - 500ï¼‰* (0.1 + 0.2 + 0.3) / 1 => 60
// y => 140 (ç¼©å°10å€)
// é‚£ä¹ˆ ä¸‰ä¸ªå…ƒç´ æ”¶ç¼©å®½åº¦
// item1 => (shrink)0.1 * (x)60 * (width)100 / (y)140  => 4.28
// item2 => (shrink)0.2 * (x)60 * (width)200 / (y)140  => 17.14
// item3 => (shrink)0.3 * (x)60 * (width)300 / (y)140  => 38.57
// é‚£ä¹ˆæœ€ç»ˆå®½åº¦
// item1 => 100 - 4.28 => 95.72
// item2 => 200 - 17.14 => 182.86
// item1 => 300 - 38.57 => 261.43
```

åŒæ—¶ï¼Œç±»ä¼¼ `flex-grow`ï¼Œ`flex-shrink` ä¹Ÿä¼šå—åˆ° `min-width` çš„å½±å“ã€‚

## æ‰©å±•é¢˜

é‚£ä¹ˆåˆ°è¿™é‡Œæˆ‘ä»¬å›å½’ä¸Šé¢çš„æ‰©å±•é¢˜ï¼Œè®¡ç®—å‡º left right å€¼ã€‚

```less
// çˆ¶å…ƒç´  width => 600
// left flex => 1 2 500
// right flex => 2 1 400
// ç”±äºæˆ‘ä»¬è¿™é‡ŒæŒ‡å®šäº† flex-basis çš„å€¼ é‚£ä¹ˆ flex-grow åˆ™ä¼šè¢«å¿½ç•¥ï¼ˆä¸ªäººç†è§£ï¼‰
// é¦–å…ˆæˆ‘ä»¬è®¡ç®—å‡ºæº¢å‡ºå®½åº¦ x => 500 + 400 - 600 => 300
// æº¢å‡ºæ€»æƒé‡ y => 2 * 500 + 1 *400 => 1400
// left æº¢å‡ºç¼©å°å€¼ => 2 * 300 * 500 / 1400 => 214.28
// right æº¢å‡ºç¼©å°å€¼ => 1 * 300 * 400 / 1400 => 85.72
// left => 500 - 214.28 => 285.72
// right => 400 - 85.71 => 314.28
```

> [Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)

> [è¯¦è§£ flex-grow ä¸ flex-shrink](https://zhuanlan.zhihu.com/p/24372279)
