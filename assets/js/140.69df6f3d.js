(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{252:function(t,s,a){"use strict";a.r(s);var e=a(28),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"移动端适配方案-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端适配方案-viewport"}},[t._v("#")]),t._v(" 移动端适配方案 viewport")]),t._v(" "),a("h3",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),a("p",[t._v("今年3月份的时候新入职了一家公司有需求要做自己公司APP上面的小程序。就是类似于微信小程序那种结构。")]),t._v(" "),a("p",[t._v("其中有遇到了一个问题，就是移动端的适配问题，之前我一直用的rem的适配方案（"),a("a",{attrs:{href:"https://www.jianshu.com/p/c5fc2c5c2b53",target:"_blank",rel:"noopener noreferrer"}},[t._v("不知道的可以点这里"),a("OutboundLink")],1),t._v("），也没有什么太大的问题。但是又想着都 9102 了会不会有点捞～于是就找找看看有没有更好的替代方案（结合时代的）。")]),t._v(" "),a("h2",{attrs:{id:"响应式-web-设计-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应式-web-设计-viewport"}},[t._v("#")]),t._v(" 响应式 Web 设计 - Viewport")]),t._v(" "),a("h3",{attrs:{id:"什么是-viewport-？"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-viewport-？"}},[t._v("#")]),t._v(" 什么是 Viewport ？")]),t._v(" "),a("blockquote",[a("p",[t._v('viewport是用户网页的可是区域。翻译中文就是“视区”，手机浏览器是把页面放在一个虚拟的"窗口"（viewport）中，通常这个虚拟的"窗口"（viewport）比屏幕宽，这样就不用把每个网页挤到很小的窗口中（这样会破坏没有针对手机浏览器优化的网页的布局），用户可以通过平移和缩放来看网页的不同部分。')])]),t._v(" "),a("h3",{attrs:{id:"关于-viewport-的三个理论"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于-viewport-的三个理论"}},[t._v("#")]),t._v(" 关于 Viewport 的三个理论")]),t._v(" "),a("blockquote",[a("p",[t._v("来自于 "),a("a",{attrs:{href:"https://twitter.com/ppk",target:"_blank",rel:"noopener noreferrer"}},[t._v("PPK(Peter-Paul Koch)"),a("OutboundLink")],1),t._v(" 关于 viewport 的三个观点（"),a("a",{attrs:{href:"https://www.quirksmode.org/mobile/viewports.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("so~1"),a("OutboundLink")],1),t._v(","),a("a",{attrs:{href:"https://www.quirksmode.org/mobile/viewports2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("so~2"),a("OutboundLink")],1),t._v(","),a("a",{attrs:{href:"https://www.quirksmode.org/mobile/metaviewport/",target:"_blank",rel:"noopener noreferrer"}},[t._v("so~3"),a("OutboundLink")],1),t._v("），有很多文章的观点都出自那里（包括本文）。")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("layout viewport")]),t._v("（布局视区）：在移动端浏览器上面，视觉视区限制了布局视区，为了能在移动设备上正常显示那些为pc端浏览器设计的网站，移动设备上的浏览器都会把自己默认的 viewport 设为980px或其他值，一般都比移动端浏览器可视区域大很多，所以就会出现浏览器出现横向滚动条的情况 。布局视区的宽度是可以用 "),a("code",[t._v("document.documentElement.clientWidth")]),t._v(" 来获取。上一张偷来的图，帮助理解。"),a("img",{attrs:{src:"https://raw.githubusercontent.com/lqk9511/gallery/master/blog/552720562-569ef61a18464_articlex.png",alt:"img"}})]),t._v(" "),a("li",[a("strong",[t._v("visual viewport")]),t._v("（视觉视区）：用户透过窗口可以看到的内容区域的大小，用户可以以滑动或者其他的方式来查看页面其他内容，通过 "),a("code",[t._v("window.screen.width")]),t._v(" 来获取它的宽度，同样上一张偷来的图，帮助理解。"),a("img",{attrs:{src:"https://raw.githubusercontent.com/lqk9511/gallery/master/blog/3629381303-5aed280720e97_articlex.png",alt:"img"}})]),t._v(" "),a("li",[a("strong",[t._v("ideal viewport")]),t._v("（理想视区）：在我们理想的状态下面，比如说有一段14 px 的文字，或者是其他的页面内容，无论在什么设备下面都展现出差不多的大小。ideal viewport 并没有一个固定的尺寸，不同的设备拥有有不同的 ideal viewport。所有的 iphone 的ideal viewport宽度都是320px，无论它的屏幕宽度是320还是640，也就是说，在 iphone 中，css 中的320px就代表 iphone 屏幕的宽度。但是安卓设备就比较复杂了，有320px的，有360px的，有384px的等等。")])]),t._v(" "),a("h2",{attrs:{id:"如何使用-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-viewport"}},[t._v("#")]),t._v(" 如何使用 Viewport")]),t._v(" "),a("h3",{attrs:{id:"利用-meta-标签设置-viewport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#利用-meta-标签设置-viewport"}},[t._v("#")]),t._v(" 利用 meta 标签设置 viewport")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("先介绍一下都有什么属性以及意思吧，大家自然就知道这段代码是什么意思了")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("width")]),t._v("：控制 viewport 的大小，可以指定的一个值，如 600，或者特殊的值，如 device-width 为设备的宽度（单位为缩放为 100% 时的 CSS 的像素）。")]),t._v(" "),a("li",[a("code",[t._v("height")]),t._v("：和 width 相对应，指定高度。")]),t._v(" "),a("li",[a("code",[t._v("initial-scale")]),t._v("：初始缩放比例，也即是当页面第一次 load 的时候缩放比例。")]),t._v(" "),a("li",[a("code",[t._v("minimum-scale")]),t._v("：允许用户缩放到的最大比例。")]),t._v(" "),a("li",[a("code",[t._v("maximum-scale")]),t._v("：允许用户缩放到的最小比例。")]),t._v(" "),a("li",[a("code",[t._v("user-scalable")]),t._v("：用户是否可以手动缩放。")])]),t._v(" "),a("p",[t._v("所以说上面的那段代码的意思就是：设置页面的 layout viewport 等于 ideal viewport 宽度，初始化的页面缩放比为1，用户最大/最小的缩放比都为1，页面不允许用户手动缩放。")]),t._v(" "),a("h3",{attrs:{id:"代码里面的书写方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码里面的书写方式"}},[t._v("#")]),t._v(" 代码里面的书写方式")]),t._v(" "),a("p",[t._v("vw单位换算： 视口宽度为 100vw 占满整个视口区域，那么 1vw 相当于占整个视口宽度的1%，所以 1px= 1/375*100 vw 所有的页面元素都可以直接进行计算换算成 vw 单位，但是这样计算和百分比方案计算比较类似，都会比较麻烦。")]),t._v(" "),a("p",[t._v("但是这么麻烦的东西肯定会有工具来解决的 "),a("code",[t._v("postcss-px-to-viewport")]),t._v(" 这样的话你的代码原来怎么写现在还是怎么写。工具会预处理css，讲 px 单位按照设定的值转换为 vw 单位，同时也要设定一些配置，下面是配合Vue-cli3.0的使用：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n  ..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ..."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"postcss-px-to-viewport"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^1.1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ...\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// postcss.config.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postcss-px-to-viewport'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      viewportWidth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'375'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 视窗的宽度，对应的是我们设计稿的宽度，一般是750")]),t._v("\n      unitPrecision"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定`px`转换为视窗单位值的小数位数（很多时候无法整除）")]),t._v("\n      viewportUnit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vw'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定需要转换成的视窗单位，建议使用vw")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// propList: ['*', '!background-image'],")]),t._v("\n      selectorBlackList"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定不转换为视窗单位的类，可以自定义，可以无限添加,建议定义一至两个通用的类名")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ignore'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      minPixelValue"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小于或等于`1px`不转换为视窗单位")]),t._v("\n      mediaQuery"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 允许在媒体查询中转换`px`")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exclude: /(\\/|\\\\)(node_modules)(\\/|\\\\)/")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("p",[t._v("代码书写：\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/lqk9511/gallery/master/blog/WechatIMG61.jpeg",alt:"img"}}),t._v("\n实际页面：\n"),a("img",{attrs:{src:"https://raw.githubusercontent.com/lqk9511/gallery/master/blog/WechatIMG60.png",alt:"img"}}),t._v("\n写到这里基本上都结束了，就可以开心的使用了。")]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("p",[t._v("这两个本来都是不收费的（对现在是付费的）")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.w3cplus.com/mobile/vw-layout-in-vue.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.w3cplus.com/mobile/vw-layout-in-vue.html"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.w3cplus.com/css/vw-for-layout.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.w3cplus.com/css/vw-for-layout.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);